(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){e.exports=n(37)},36:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(13),c=n.n(u),o=n(2),l=n(3),i=n.n(l),d="/api/persons",m=function(){return i.a.get(d).then(function(e){return e.data})},f=function(e){return i.a.post(d,e).then(function(e){return e.data})},s=function(e,t){return i.a.put("".concat(d,"/").concat(e),t).then(function(e){return e.data})},b=function(e){return i.a.delete("".concat(d,"/").concat(e)).then(function(e){return e.data})},h=function(e){var t=e.name,n=e.number,a=e.del_entry;return r.a.createElement("li",null,t,": ",n,r.a.createElement("button",{onClick:a},"delete"))},v=function(e){var t=e.message;return null===t?null:t.includes("Added")?r.a.createElement("div",{className:"ok"},t):t.includes("server")?r.a.createElement("div",{className:"error"},t):void 0},p=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],u=t[1],c=Object(a.useState)(""),l=Object(o.a)(c,2),i=l[0],d=l[1],p=Object(a.useState)(""),E=Object(o.a)(p,2),w=E[0],j=E[1],O=Object(a.useState)(""),g=Object(o.a)(O,2),y=g[0],k=g[1],S=Object(a.useState)(!0),C=Object(o.a)(S,2),N=C[0],A=C[1],D=Object(a.useState)(!0),J=Object(o.a)(D,2),T=J[0],U=J[1],_=Object(a.useState)(null),x=Object(o.a)(_,2),B=x[0],I=x[1];Object(a.useEffect)(function(){m().then(function(e){u(e)})},[]),console.log("render",n.length,"people");var P=Object(a.useState)(!0),q=Object(o.a)(P,2),z=(q[0],q[1],n.filter(function(e){return e.name.toUpperCase().includes(y.toUpperCase())}));return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(v,{message:B}),r.a.createElement("form",null,r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{value:y,onChange:function(e){k(e.target.value)}}))),r.a.createElement("h2",null,"Add a New Number"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t={name:i,number:w};!0===N?(u(n.concat(t)),f(t).then(function(e){u(n.concat(e))}),I("Added "+i),setTimeout(function(){I(null)},5e3)):!1===N&&!0===T?window.confirm(i+"is already added to the phonebook, would you like to replace the old number with a new one?")&&s(n.find(function(e){return e.name===i}).id,t).then(function(e){u(n.map(function(e){return e.id!==n.find(function(e){return e.name===i}).id?e:t}))}):window.alert(i+" is already added to phonebook"),d(""),j("")}},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:i,onChange:function(e){d(e.target.value),A(!0),n.forEach(function(t,n,a){t.name===e.target.value&&A(!1)})}})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:w,onChange:function(e){j(e.target.value),U(!0),n.forEach(function(t,n,a){t.number===e.target.value&&U(!1)})}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))),r.a.createElement("h2",null,"Numbers"),z.map(function(e){return r.a.createElement(h,{key:e.name,name:e.name,number:e.number,del_entry:function(){return t=e.id,a=e.name,void(window.confirm("Do you really want to delete this entry?")&&b(t).then(u(n.filter(function(e){return e.id!==t}))).catch(function(e){I(a+" has already been removed from the server"),setTimeout(function(){I(null)},5e3)}));var t,a}})}))};n(36);c.a.render(r.a.createElement(p,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.19de5c63.chunk.js.map